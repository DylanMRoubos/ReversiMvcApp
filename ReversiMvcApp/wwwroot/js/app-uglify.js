"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Game={init:function(e,t){Game.Model.setGameToken(e),Game.Model.setPlayerToken(t),window.setInterval(function(){Game.Model.updateGame()},2e3)}},FeedbackWidget=function(){var n=function(e){e(),t()},t=function(){$("#feedback-widget").removeClass("fade-in"),$("#feedback-widget").addClass("fade-out")};return{hide:t,show:function(e,t,a){$(".alert-text").text(e),$("#feedback-widget").removeClass("fade-out"),$("#feedback-widget").addClass("fade-in"),$("#feedback-icon").on("click",n.bind(null,t)),$(".FeedbackButton1").on("click",n.bind(null,t)),0==a?$(".FeedbackButton").css("display","none"):1==a?($(".FeedbackButton1").css("display","inline"),$(".FeedbackButton2").css("display","none")):2==a&&$(".FeedbackButton").css("display","inline")}}}();Game.Api={showMeme:function(){Game.Data.apicall("https://meme-api.herokuapp.com/gimme").then(function(e){$("#meme").html(Game.Template.parseTemplate("meme",{src:e.url}))})}},Game.Data=function(){function r(e,n){return new Promise(function(t,a){$.ajax({url:e,type:"PUT",headers:{"Content-Type":"application/json"},data:JSON.stringify(n),success:function(e){t(e)},error:function(e){a(e)}})})}function e(e){$("#descriptions").html(e.description),$("#player1token").html("Wit: "+e.playerToken1),$("#player2token").html("Zwart: "+e.playerToken2),1==e.currentPlayer?($("#player1token").css("font-weight","bold"),$("#player2token").css("font-weight","normal")):($("#player2token").css("font-weight","bold"),$("#player1token").css("font-weight","normal"))}var t={printboard:function(e){e={board:JSON.parse(e)};$("#boardarea").html(Game.Template.parseTemplate("board",e))},printDetails:e};return _defineProperty(t,"printDetails",e),_defineProperty(t,"showFiche",function(t){var a,n,o=0;$("#board").find("div").each(function(){var e;t==this&&(a=(e=o/2)%8,n=~~(e/8)),o++});var e={x:a,y:n,playerToken:Game.Model.getPlayerToken(),gameToken:Game.Model.getGame().token,pass:!1};r("https://localhost:5001/api/Spel/Zet",e).then(function(e){Game.Meme.showMeme()})}),_defineProperty(t,"apicall",function(e){return new Promise(function(t,a){$.ajax({url:e,data:{},type:"GET",success:function(e){t(e)},error:function(e){a("ERROR")}})})}),_defineProperty(t,"skip",function(){var e={gameToken:Game.Model.getGame().token,playerToken:Game.Model.getPlayerToken()};r("https://localhost:5001/api/Spel/Skip",e)}),_defineProperty(t,"apicallPut",r),_defineProperty(t,"apicallPut",r),_defineProperty(t,"surrender",function(){var e={gameToken:Game.Model.getGame().token,playerToken:Game.Model.getPlayerToken()};r("https://localhost:5001/api/Spel/Opgeven",e)}),t}(),Game.Delete=function(){function e(){var e={playerToken:Game.Model.getPlayerToken(),gameToken:Game.Model.getGame().token};Game.Data.apicallPut("https://localhost:5001/api/spel/finish",e)}return _defineProperty({acceptDeleteGame:e},"acceptDeleteGame",e)}(),Game.Meme=function(){function e(){Game.Data.apicall("https://meme-api.herokuapp.com/gimme").then(function(e){$("#meme").html(Game.Template.parseTemplate("meme",{src:e.url}))})}return _defineProperty({showMeme:e},"showMeme",e)}(),Game.Model=function(){var t="",a="",n="",o=function(e){if(null==e.token&&window.location.replace("https://localhost:5002"),1==e.finished)return $("#board").css("opacity","0.5"),void FeedbackWidget.show("The game has ended and "+e.winner+" has won",Game.Delete.acceptDeleteGame,1);(1==e.currentPlayer?e.playerToken1:e.playerToken2)!=n&&$("#board").css("opacity","0.5")},e=function(a){return new Promise(function(t,e){Game.Data.apicall("https://localhost:5001/api/spel/"+a).then(function(e){null!=e&&(t(e),Game.Data.apicall("https://localhost:5001/api/spel/finished/"+a))}).catch(function(e){console.log("Error in getting the data 2")})})};return{getGame:function(){return t},getPlayerToken:function(){return n},setGameToken:function(e){a=e},getGameToken:function(){return a},setPlayerToken:function(e){n=e},updateGame:function(){e(a).then(function(e){t=e,Game.Data.printboard(t.board),Game.Data.printDetails(t),Game.Stats.updateStats(),o(t)}).catch(function(e){console.log("Error in getting the game data from API")})}}}(),Game.Stats=function(){var e=function(){return new Promise(function(o,e){var t=Game.Model.getGame().token;Game.Data.apicall("https://localhost:5001/api/spel/Amount/"+t).then(function(e){var t,a,n=JSON.parse(e);for(t in playerPieceHistory={player1:[],player2:[]},n[0])playerPieceHistory.player1.push(n[0][t].Amount);for(a in n[1])playerPieceHistory.player2.push(n[1][a].Amount);o(playerPieceHistory)})})},t=function(e){$("#Chart").html(Game.Template.parseTemplate("stats",e))};return{updateStats:function(){e().then(function(e){t(e)})}}}(),Game.Template={parseTemplate:function(e,t){return(e=e,spa_templates.templates[e])(t)}};